{{ header }}
<div id="product-reviews" class="container">
    <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
            <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
    </ul>
    <div class="row">
        {{ column_left }}
        {% if column_left and column_right %}
            {% set class = 'col-sm-6' %}
        {% elseif column_left or column_right %}
            {% set class = 'col-sm-9' %}
        {% else %}
            {% set class = 'col-sm-12' %}
        {% endif %}
        <div id="content" class="{{ class }}">
            {#            {{ content_top }}#}
            <h1>
                Отзывы о магазине
                {#                {{ heading_title }}#}
            </h1>
            <p>
                Спасибо за то, что поделились своим мнением о работе нашего магазина!
                Ваш отзыв будет опубликован после модерации
            </p>
            <a class="product-thumb__add-to-cart add_to_cart btn " href="/index.php?route=product/reviews">Вернуться назад</a>


            {{ content_bottom }}
        </div>
        {{ column_right }}
    </div>
</div>
{{ footer }}

<script>
    $(function () {
        $('#button-review').on('click', function() {
            $.ajax({
                url: 'index.php?route=product/reviews/write',
                type: 'post',
                dataType: 'json',
                data: $('#form-review').serialize(),
                beforeSend: function() {
                    $('#button-review').button('loading');
                },
                complete: function() {
                    $('#button-review').button('reset');
                },
                success: function(json) {

                    console.log(json);

                    // if (json['error']) {
                    //     uniFlyAlert('danger', json['error']);
                    // }
                    //
                    // if (json['success']) {
                    //     $('#form-review').before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+json['success']+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');
                    //     $('#form-review input, #form-review textarea').val('');
                    //     $('.review_star input').attr('checked', false).prop('checked', false);
                    //     $('#form-review').slideToggle();
                    //
                    //     scroll_to('.alert.alert-success');
                    // }
                }
            });
        });

        $('.review-form__input').on('mouseenter', function () {
            $('.review-form__star:lt('+$(this).val()+')').removeClass('far').addClass('fa');

            $(this).on('mouseleave', function() {
                $('.review-form__star').removeClass('fa').addClass('far');

                $('.review-form__input').each(function() {
                    if($(this).prop('checked')) {
                        $('.review-form__star:lt('+$(this).val()+')').removeClass('far').addClass('fa');
                    }
                });
            });
        });

        $('.review-form__input').on('click', function(){
            $('.review-form__star:not(:lt('+$(this).val()+'))').removeClass('fa').addClass('far');
        });
    });
</script>
